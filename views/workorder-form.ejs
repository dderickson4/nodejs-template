
<script>
  $(document).ready(function () {
    $('#submit').click(function() {
      $(this).parents('form:first').submit();
    });
    $("#reset").click(function() {
        $(this).closest('form').find("input[type=text], textarea").val("");
        initfields();
    });
  })


</script>

<script>

function initfields () {
    $("#WorkOrderEntry").focus();
    $("#TimeEstimate").val(1);
    $("#ActualTime").val("1");
    $("#CreatedBy").val("David Erickson");
    $("#Category").val("Maintenance");
    $("#Status").val("Open");

    $("#dtWorkOrderEntry").val(getFormattedDate(new Date()));
    $("#dtWorkOrderTime").val(formatTime(new Date()));
}
$(function() {

    $( ".datepicker" ).datepicker();
    initfields();


<% if (formdata) { if (formdata.length > 0) { %>
    $("#dtWorkOrderEntry").val("<%=formdata[0].dtWorkOrderEntry%>");
    $("#dtWorkOrderTime").val("<%=formdata[0].dtWorkOrderTime%>");
    $("#Category").val("<%=formdata[0].Category%>");
    $("#Status").val("<%=formdata[0].Status%>");
    $("#WorkOrderEntry").val("<%=formdata[0].WorkOrderEntry%>");
    $("#TimeEstimate").val("<%=formdata[0].TimeEstimate%>");
    $("#ActualTime").val("<%=formdata[0].ActualTime%>");
    $("#CreatedBy").val("<%=formdata[0].CreatedBy%>");

<% } else { %>
    $("#reset").click();
<% } }%>
});

function getFormattedDate(date) {
    var day = date.getDate();
    var month = date.getMonth() + 1;
    var year = date.getFullYear().toString();
    return year + '' + month + '' + day;
}

function formatTime(date) {
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var ampm = hours >= 12 ? 'pm' : 'am';
  hours = hours % 12;
  hours = hours ? hours : 12; // the hour '0' should be '12'
  minutes = minutes < 10 ? '0'+minutes : minutes;
  var strTime = hours + ':' + minutes + ' ' + ampm;
  return strTime;
}
</script>

<div id="errorWrapper" style="display:none;">
    <%-error%>
</div>

<div class="container">



        <form class="form-horizontal " method="post" action="/post/workorder/dtWorkOrderEntry|dtWorkOrderTime" enctype="multipart/form-data">
            <fieldset>
                <legend>Work Order</legend>

                <a class="btn btn-primary btn-lg" href="/list/demo/WorkOrder" alt="API"><i class="glyphicon glyphicon-list"></i></a>
                <a class="btn btn-primary btn-lg" href="/demo/WorkOrder/delete/1" alt="Delete"><i class="glyphicon glyphicon-remove-circle"></i></a>
                <a class="btn btn-primary btn-lg" href="/view/WorkOrder-timeline" alt="Data Timeline"><i class="glyphicon glyphicon-tasks"></i></a>
                <a class="btn btn-primary btn-lg" href="/view/workorder-form/-1" alt="Refresh Form"><i class="glyphicon glyphicon-refresh"></i></a>


                <div class="row">
                    <div class="col-md-2">
                        <label class="control-label" for="dtWorkOrderEntry">Date</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge datepicker form-control" id="dtWorkOrderEntry" name="dtWorkOrderEntry" rel="popover" data-content="Enter today's date." data-original-title="Enter today's date.">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="control-label" for="dtWorkOrderTime">Time</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge form-control" id="dtWorkOrderTime" name="dtWorkOrderTime" rel="popover" data-content="Enter time of entry." data-original-title="Enter time of Entry.">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="control-label" for="Category">Category</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge form-control" id="Category" name="Category" rel="popover" data-content="Enter Category." data-original-title="Enter Category.">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="control-label" for="Status">Status</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge form-control" id="Status" name="Status" rel="popover" data-content="Enter Status." data-original-title="Enter Status.">
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="WorkOrderEntry">Work Order Entry</label>
                    <div class="controls">
                        <textarea rows="5" class="form-control" id="WorkOrderEntry" name="WorkOrderEntry" rel="popover" data-content="Enter your Work Order." data-original-title="Enter your Work Order.">
                        </textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                    <label class="control-label" for="TimeEstimate">Time Estimate in hours</label>
                    <div class="controls">
                        <input type="text" class="input-xlarge form-control" id="TimeEstimate" name="TimeEstimate" rel="popover" data-content="Estimate hours to complete job." data-original-title="Estimate hours to complete job.">
                    </div>
                    </div>
                    <div class="col-md-2">
                        <label class="control-label" for="ActualTime">Actual Time</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge form-control" id="ActualTime" name="ActualTime" rel="popover" data-content="Actual Time." data-original-title="Actual Time.">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="control-label" for="CreatedBy">Created By</label>
                        <div class="controls">
                            <input type="text" class="input-xlarge form-control" id="CreatedBy" name="CreatedBy" rel="popover" data-content="Created By." data-original-title="Created By.">
                        </div>
                    </div>
                </div>
                <div class="form-controls">
                    <label class="control-label" for="displayImage">Upload Files</label>
                    <input class="input-xlarge" id="displayImage" type="file" name="displayImage" ></br>
                    <% if (formdata) { if (formdata.length > 0) { %>
                    <% if (formdata[0].Picture != null) { %>
                        <img src="<%=formdata[0].Picture%>" class="img-rounded" alt="" width="304" height="236">
                    <% } } } %>

                </div>


                <Br><br>

                <div class="footer">
                    <a id="submit" class="btn btn-primary" href="#" el="tooltip" title="Save Record"><i class="icon-save icon-white"></i>&nbsp;&nbsp;Save</a>
                    <a id="reset" class="btn btn-primary" href="#" el="tooltip" title="Reset form"><i class="icon-cancel icon-white"></i>&nbsp;&nbsp;Clear</a>
                </div>


            </fieldset>
        </form>




        </br></br></br>

        <footer class="footer">
            <p>Â© 2016 EIS Software, Inc.</p>
        </footer>

</div> <!-- /container -->

<%-js%>


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="js/plugins/jquery-popover/jquery.cf.popover.min.js"></script>
    <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
    <script type="text/javascript" src="/js/validate.js"></script>
    


      <!-- Add mousewheel plugin (this is optional) -->
      <!--
      <script type="text/javascript" src="/js/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
      -->
    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="/js/jquery.browser.js"></script>
    <link rel="stylesheet" type="text/css" href="/js/fancybox/jquery.fancybox.css?v=2.1.5" media="screen" />
    <script type="text/javascript" src="/js/fancybox/jquery.fancybox.js?v=2.1.5"></script>
  
    <script type="text/javascript">
      $(document).ready(function() {   
        $('.fancybox').fancybox();
        $(":input").bind('keypress', function(e){
          var id = $(this).attr('id');
          console.log(id);
          var code = (e.keyCode ? e.keyCode : e.which);
           if(code == 13) { //Enter keycode
             //Do something
             console.log('enter key' + id);
             var form_json = $("form:first").serializeArray();
             form_json.currentid = id;
             console.log(form_json);
           }
        })
      });
    </script>



